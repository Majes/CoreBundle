services:
    kernel.listener.system_listener:
        class: Majes\CoreBundle\EventListener\SystemListener
        arguments: ["@doctrine.orm.entity_manager", "@security.context", "@service_container", "@router"]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }

    kernel.listener.exception_listener:
        class: Majes\CoreBundle\EventListener\ExceptionListener
        arguments: [@templating, @kernel, @service_container]
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }

    #translator:
    #    class: Majes\CoreBundle\Services\Translation\Translator
    #    arguments: [%locale%]
#
    translation.loader.db:
        class: Majes\CoreBundle\Services\DBLoader
        arguments: [@doctrine.orm.entity_manager]
        tags:
            - { name: translation.loader, alias: db }

    majescore.select2_extension:
        class: Majes\CoreBundle\Form\Extension\Select2TypeExtension
        tags:
            - { name: form.type_extension, alias: choice }

    majescore.mediapicker_extension:
        class: Majes\CoreBundle\Form\Extension\MediaPickerTypeExtension
        tags:
            - { name: form.type_extension, alias: file }

    majescore.spanned_extension:
        class: Majes\CoreBundle\Form\Extension\SpannedTypeExtension
        tags:
            - { name: form.type_extension, alias: text }

    majescore.rte_extension:
        class: Majes\CoreBundle\Form\Extension\RteTypeExtension
        tags:
            - { name: form.type_extension, alias: textarea }

    majescore.datepicker_extension:
        class: Majes\CoreBundle\Form\Extension\DatepickerTypeExtension
        tags:
            - { name: form.type_extension, alias: text }

    majescore.switched_extension:
        class: Majes\CoreBundle\Form\Extension\SwitchedTypeExtension
        tags:
            - { name: form.type_extension, alias: checkbox }

    majescore.linked_extension:
        class: Majes\CoreBundle\Form\Extension\LinkedTypeExtension
        tags:
            - { name: form.type_extension, alias: text }

    majescore.twig.core_extension:
        class: Majes\CoreBundle\Twig\CoreExtension
        arguments:  ["@service_container","@doctrine.orm.entity_manager"]
        tags:
            - { name: twig.extension }

    majes.notification:
        class: Majes\CoreBundle\Services\Notification
        arguments:
            session: "@session"
            source: "core"

    majes.mailer:
        class: Majes\CoreBundle\Services\Mailer
        arguments: [@mailer, @templating,@doctrine.orm.entity_manager, @security.context, %admin_email%]

    majes.ga:
        class: Majes\CoreBundle\Services\GoogleAnalytics
        arguments: ["@service_container",@doctrine.orm.entity_manager]
    
    majes.social:
        class: Majes\SocialBundle\Services\Social
        arguments: ["@service_container"]

    authentication_handler:
        class: Majes\CoreBundle\Handler\AuthenticationHandler
        arguments:  [@router, @security.context]
        tags:
            - { name: 'monolog.logger', channel: 'security' }
            
    swiftmailer.transport.simplemailinvoker: 
        class: Swift_Transport_SimpleMailInvoker

    swiftmailer.transport.eventdispatcher: 
        class: Swift_Events_SimpleEventDispatcher
        
    swiftmailer.transport.buffer: 
        class: Swift_Transport_StreamBuffer

    swiftmailer.transport.real:
        class: Swift_Transport_MailTransport 
        arguments: [@swiftmailer.transport.simplemailinvoker, @swiftmailer.transport.eventdispatcher]

